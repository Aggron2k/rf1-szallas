<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{index}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content" class="container mt-5">
    <div class="row">
        <div class="col-lg-3">
            <div class="card-header">Szállások részletes keresése</div>
            <div class="card-body">
                <form th:method="post" th:action="@{/search}" th:object="${search}">
                    <div class="form-floating mb-3">
                        <label>
                            <input type="text" name="hova" th:field="*{hova}" th:value="*{getHova()}"  class="form-control" placeholder="Balaton">
                        </label>
                        <label>Hova</label>
                    </div>
                    <div class="form-floating mb-3">
                        <label>
                            <input type="date" name="check_in" th:field="*{check_in}"  th:value="*{getCheck_in()}"  class="form-control" >
                        </label>
                        <label>Mettől</label>
                    </div>
                    <div class="form-floating mb-3">
                        <label>
                            <input type="date" name="check_out" th:field="*{check_out}" th:value="*{getCheck_out()}"  class="form-control" >
                        </label>
                        <label>Meddig</label>
                    </div>
                    <div class="form-floating mb-3">
                        <label>Személyek száma</label>
                        <label>
                            <input type="number" name="numberOfPerson" th:field="*{numberOfPerson}" th:value="*{getNumberOfPerson()}"  class="form-control" placeholder="1">
                        </label>
                    </div>
                    <div class="form-floating mb-3">
                        <label for="StarsInput" class="form-label">Szállások besorolása</label>
                        <input type="text" class="form-control" id="StarsInput" name="Stars" placeholder="Pl. 5 csillag">
                    </div>
                    <div class="form-floating mb-3">
                        <input type="checkbox" class="form-check-input" id="reggeliCheckbox" th:field="*{mealOption}" th:value="*{getMealOption().REGGELI}">
                        <label class="form-check-label" for="reggeliCheckbox">Reggeli az árban</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="checkbox" class="form-check-input" id="vacsoraCheckbox" th:field="*{mealOption}" th:value="*{getMealOption().VACSORA}">
                        <label class="form-check-label" for="vacsoraCheckbox">Vacsora az árban</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="checkbox" class="form-check-input" id="reggeliVacsoraCheckbox" th:field="*{mealOption}" th:value="*{getMealOption().REGGELI_ES_VACSORA}">
                        <label class="form-check-label" for="reggeliVacsoraCheckbox">Reggeli + Vacsora az árban</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="checkbox" class="form-check-input" id="nincsMealCheckbox" th:field="*{mealOption}" th:value="*{getMealOption().NINCS_MEAL}">
                        <label class="form-check-label" for="nincsMealCheckbox">Nincs étkezés az árban</label>
                    </div>
                    <hr>
                    <div class="form-check">
                        <label>
                            <input type="checkbox" class="form-check-input" th:id="turazasCheckbox" th:field="*{leisureActivities}" th:value="*{getLeisureActivities().TURAZAS}">
                        </label>
                        <label class="form-check-label" th:for="turazasCheckbox">Túrázás</label>
                    </div>
                    <div class="form-check">
                        <label>
                            <input type="checkbox" class="form-check-input" th:id="viziparkCheckbox" th:field="*{leisureActivities}" th:value="*{getLeisureActivities().VIZIPARK}">
                        </label>
                        <label class="form-check-label" th:for="viziparkCheckbox">Vízipark</label>
                    </div>
                    <div class="form-check">
                        <label>
                            <input type="checkbox" class="form-check-input" th:id="varosnezoCheckbox" th:field="*{leisureActivities}" th:value="*{getLeisureActivities().VAROSNEZO_SETA}">
                        </label>
                        <label class="form-check-label" th:for="varosnezoCheckbox">Városnéző séta</label>
                    </div>
                    <div class="form-check">
                        <label>
                            <input type="checkbox" class="form-check-input" th:id="jatszoterCheckbox" th:field="*{leisureActivities}" th:value="*{getLeisureActivities().JATSZOTER}">
                        </label>
                        <label class="form-check-label" th:for="jatszoterCheckbox">Játszótér</label>
                    </div>
                    <div class="form-check">
                        <label>
                            <input type="checkbox" class="form-check-input" th:id="szaunaCheckbox" th:field="*{leisureActivities}" th:value="*{getLeisureActivities().SZAUNA}">
                        </label>
                        <label class="form-check-label" th:for="szaunaCheckbox">Szauna</label>
                    </div>
                    <div class="d-grid">
                        <button class="btn btn-primary btn-login text-uppercase fw-bold" name="search" type="submit">Keresés</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-lg-9">
            <div class="row">
                <div class="col-lg-12">
                    <p><span th:text="${#maps.size(szallasok)}"></span> keresési találat.</p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <p th:text="${search.getHova() + ', ' + search.getCheck_in() + ' - ' + search.getCheck_out()}"></p>
                </div>
            </div>
            <div th:each="szallas : ${szallasok}" class="card mb-3 search-result-card">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&q=80&w=2070&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="img-fluid p-3" style="border-radius: 24px;" alt="...">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${szallas.getKey().getName()}"></h5>
                            <p class="card-text" th:text="${szallas.getKey().getDescription()}"></p>
                            <div class="row">
                                <div class="col-lg-6">
                                    <p class="card-text" th:text="${szallas.getValue().getType() + ' szoba'}"></p>
                                </div>
                                <div class="col-lg-6 text-end">
                                    <p class="card-text" th:text="${szallas.getValue().getPrice() + ' Ft'}"></p>
                                    <!-- Itt kellene ezt felszorozni a fővel és az éjszakák számával csak String konverzió miatt nem működik -->
                                    <p class="card-text" th:text="${napokSzama + ' éjszaka, ' + search.numberOfPerson + ' főre'}"></p>
                                </div>
                            </div>
                            <a th:href="${'/accomodation/' + szallas.getKey().getId()}" class="btn btn-primary">Részletek</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>